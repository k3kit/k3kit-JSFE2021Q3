(()=>{const e=document.querySelector(".page1"),t=document.querySelector(".page2"),n=document.querySelector(".page4"),s=document.querySelector(".page3"),a=document.querySelector(".btn1"),r=document.querySelector(".btn2"),i=document.querySelector(".btn4"),c=(document.querySelector(".btn3"),document.querySelector(".close__btn")),o=document.querySelector(".wrapper-cat"),d=document.querySelector(".btn-home");a.addEventListener("click",(function(){e.classList.add("hide"),t.classList.remove("hide"),n.classList.add("hide")})),i.addEventListener("click",(function(){e.classList.add("hide"),n.classList.remove("hide")})),c.addEventListener("click",(function(){e.classList.remove("hide"),n.classList.add("hide")})),r.addEventListener("click",(function(){e.classList.add("hide"),t.classList.remove("hide"),s.classList.remove("hide")})),d.addEventListener("click",(function(){e.classList.remove("hide"),t.classList.add("hide"),e.style.animation="fadeIn 1.3s;"}));let l=document.getElementById("minus-btn"),m=document.getElementById("count"),u=document.getElementById("plus-btn"),h=0;m.innerHTML=h,l.addEventListener("click",(()=>{h<=0?m.innerHTML=0:h-=1,m.innerHTML=h})),u.addEventListener("click",(()=>{h+=1,m.innerHTML=h}));const p=document.querySelector(".answer__list"),L=document.querySelector(".image__question"),g=document.querySelector(".play__wrapper"),y=document.querySelector(".question"),v=document.querySelector(".picture__answer-list"),w=document.querySelector(".wrapper__image-question"),f=document.querySelector(".btn1"),E=document.querySelector(".btn2"),_=document.querySelector(".cat-author-games"),k=document.querySelector(".cat-main-wrapper"),A=document.querySelector("main");let T;document.querySelector(".start-page-wrapper");const b=[],q=[];let M,H,N=0,S=0,$=!1,I=!1;function j(e){!function(e){const t=new Image;t.src=`https://raw.githubusercontent.com/k3kit/image-data/master/img/${b[e].imageNum}.jpg`,t.onload=()=>{L.style.backgroundImage=`url('${t.src}')`}}(e),1===b[e].randomAnswerArray.length&&b[e].randomAnswer(b),function(e){p.innerHTML="",b[e].randomAnswerArray.forEach(((e,t)=>{let n=document.createElement("div");n.className="answers__list-item",n.innerHTML=`${b[e].author}`,p.append(n),3===t&&($=!1)})),M=document.querySelectorAll(".answers__list-item"),M.forEach(((e,t)=>{e.addEventListener("click",(()=>{$||($=!0,B(t))}))}))}(e)}function x(e){1===b[e].randomAnswerArray.length&&b[e].randomAnswer(b),function(e){v.innerHTML="",b[e].randomAnswerArray.forEach(((e,t)=>{let n=document.createElement("div");n.className="author__answers-item",v.append(n);let s=new Image;s.src=`https://raw.githubusercontent.com/k3kit/image-data/master/img/${e}.jpg`,s.onload=()=>{setTimeout((()=>{n.style.backgroundImage=`url('${s.src}')`,n.classList.add("filter"),3===t&&($=!1),setTimeout((()=>{n.classList.remove("filter")}),600)}),300*t)}})),H=document.querySelectorAll(".author__answers-item"),H.forEach(((e,t)=>{e.addEventListener("click",(()=>{$||($=!0,B(t),w.classList.add("hide"))}))}))}(e),P(`Какую картину написал ${b[e].author}?`)}function G(e){void 0!==e&&(N=e),S=0;let t=q[N][S];N<12?(j(t),P("Кто написал эту картину?")):(x(t),P(`Какую картину написал ${b[t].author}?`))}function P(e){y.innerHTML=`${e}`}function B(e){if(I)return;I=!0;let t=10*N+S;e===b[t].rightAnswer?(b[t].tempGuessed=!0,O(!0,t)):O(!1,t)}function O(e,t,n=!1){console.log("aaa");let s=document.createElement("div");const a=new Image;a.src=`https://raw.githubusercontent.com/k3kit/image-data/master/img/${b[t].imageNum}.jpg`,s.append(a);const r=document.createElement("div");r.innerHTML=`${b[t].author}`;const i=document.createElement("div");i.innerHTML=`${b[t].name}`;const c=document.createElement("div");c.innerHTML=`${b[t].year}`;const o=document.createElement("div");o.innerHTML="Продолжить",s.append(r),s.append(i),s.append(c),s.append(o),n?(s.className="result__answer",o.className="popup__btn-next win",k.append(s),o.addEventListener("click",(()=>{C(s),A.classList.remove("overflow-full"),I=!1}))):(g.append(s),o.addEventListener("click",(()=>{9===S?(q[N].forEach((e=>b[e].saveProgress())),p.innerHTML="",L.style.backgroundImage="none",v.innerHTML="",function(){let e=document.createElement("div");e.className="result__answer";const t=document.createElement("div");t.className="round-result",t.innerHTML="0 / 10";const n=document.createElement("div");n.innerHTML="Следующий квиз",n.className="popup__btn-next win",n.addEventListener("click",(()=>{N++,C(e),G()}));const s=document.createElement("div");s.innerHTML="Главная страница",s.className="popup__btn-next win",s.addEventListener("click",(()=>{q[N].forEach((e=>b[e].resetProgress())),C(e),F(N<=11?"pic":"author"),D()})),e.append(t),11===N||23===N||e.append(n),e.append(s),g.append(e),function(e,t){for(let e=0;e<=z();e++)t.innerHTML=`${e} / 10`}(0,t)}()):N<12?j(q[N][++S]):x(q[N][++S]),C(s),I=!1})),e?(s.className="result__answer win",o.className="popup__btn-next win"):(s.className="result__answer loose",o.className="popup__btn-next loose"))}function z(){return q[N].reduce(((e,t)=>(b[t].guessed?1:0)+e),0)}function C(e){e.classList.add("hidden-answer-popup"),setTimeout((()=>{e.remove()}),500)}function D(){p.innerHTML="",y.innerHTML="",L.classList.add("hide"),L.classList.remove("hide"),v.innerHTML="",w.classList.add("hide"),w.classList.remove("hide"),y.classList.add("hide"),y.classList.remove("hide"),k.style.display="",I=!1}function F(e){_.innerHTML="";let t=function(e){let t=[];N="pic"===e?0:12;for(let e=0;e<12;e++)t.push(z()),N++;return t}(e),n=0;"pic"!==e&&(n=120),t.forEach(((t,s)=>{let a=n,r=document.createElement("div");r.className="cat-author-item";let i=document.createElement("div");if(i.className="number-cat",i.innerHTML=s<9?`0${s+1}`:`${s+1}`,r.append(i),0!==t){r.classList.add("played");let n=document.createElement("div");n.className="score-cat",n.innerHTML=`${t} / 10`,n.addEventListener("click",(t=>{t.stopPropagation(),setTimeout((()=>{!function(e){N=e,_.innerHTML="",q[N].forEach(((e,t)=>{let n=document.createElement("div");n.className="cat-author-item",b[e].guessed&&n.classList.add("guessed");const s=new Image;s.src=`https://raw.githubusercontent.com/k3kit/image-data/master/full/${b[e].imageNum}full.jpg`,s.onload=()=>{n.style.backgroundImage=`url('${s.src}')`},_.append(n),n.addEventListener("click",(()=>{O(!0,e,!0)}))}))}(("pic"===e?0:12)+s),D()}),300)})),r.append(n)}r.addEventListener("click",(()=>{k.classList.add("main-hide"),k.classList.remove("main-visible"),g.classList.add("main-visible"),g.classList.remove("main-hide"),A.classList.add("overflow-full"),o.classList.remove("hide"),k.style.display="none",G(a/10)}));const c=new Image;c.src=`https://raw.githubusercontent.com/k3kit/image-data/master/img/${b[n].imageNum}.jpg`,c.onload=()=>{r.style.backgroundImage=`url('${c.src}')`},_.append(r),n+=10}))}!async function(){const e=await fetch("./data.json");T=await e.json(),await T.forEach((e=>b.push(new J(e,T.length))))}(),function(){for(let e=0,t=-1;e<240;e++)e%10==0&&(t++,q.push([])),q[t].push(e)}(),f.addEventListener("click",(()=>{F("pic")})),E.addEventListener("click",(()=>{F("author"),w.classList.add("hide")})),_.addEventListener("click",(function(){k.classList.add("hide")}));class J{constructor(e,t){this.author=e.author,this.imageNum=e.imageNum,this.name=e.name,this.year=e.year,this.rightAnswer=0,this.guessed=!1,this.tempGuessed=!1,this.randomAnswerArray=[+this.imageNum],this.ArrayLength=t}randomAnswer(e){for(;this.randomAnswerArray.length<4;){let t=Math.floor(Math.random()*this.ArrayLength);this.randomAnswerArray.some((n=>e[n].author===e[t].author))?this.randomAnswer(e):this.randomAnswerArray.push(t)}this.randomAnswerArray.sort((()=>Math.random()-.5)),this.rightAnswer=this.randomAnswerArray.indexOf(+this.imageNum)}reset(){this.guessed=!1,this.tempGuessed=!1,this.randomAnswerArray=[+this.imageNum],this.rightAnswer=0}saveProgress(){this.guessed=this.tempGuessed,this.tempGuessed=!1}resetProgress(){this.tempGuessed=!1}}})();