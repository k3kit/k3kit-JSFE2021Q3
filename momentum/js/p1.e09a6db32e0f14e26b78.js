(()=>{"use strict";const e=[{title:"Aqua Caelestis ",src:"assets/sounds/AquaCaelestis.mp3",duration:" 00:39"},{title:"River Flows In You ",src:"assets/sounds/RiverFlowsInYou.mp3",duration:" 01:37"},{title:"Ennio Morricone ",src:"assets/sounds/EnnioMorricone.mp3",duration:" 01:37"},{title:"Summer Wind ",src:"assets/sounds/SummerWind.mp3",duration:" 01:50"}],t=document.querySelector(".time"),n=document.querySelector(".dates"),o=document.querySelector(".greeting"),c=document.querySelector(".name"),r=document.querySelector(".slide-prev"),a=document.querySelector(".slide-next"),i=document.querySelector(".ru"),l=document.querySelector(".en"),d=document.querySelector(".greeting-container"),s=document.querySelector(".quote-container"),u=document.querySelector(".weather");let m="en";const y={en:{night:"Good night",morning:"Good morning",afternoon:"Good afternoon",evening:"Good evening"},ru:{night:"Спокойной ночи",morning:"Доброе утро",afternoon:"Добрый день",evening:"Добрый вечер"}},p={en:"m/c",ru:"м/с"},v={en:"Winds speed",ru:"Скорость ветра"},h={en:"Air humidity",ru:"Влажность воздуха"},g={en:"en",ru:"ru"},L={en:"[Enter name]",ru:"[Введите имя]"};function f(){const e=(new Date).getHours();return e>=5&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0&&e<5?"night":void 0}function S(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}!function e(){const c=(new Date).toLocaleTimeString();t.textContent=c,setTimeout(e,1e3),function(){const e=(new Date).toLocaleDateString(g[m],{month:"long",day:"numeric",weekday:"long"});n.innerText=e}(),f(),function(e){const t=`${e}`;o.textContent=t}(y[m][f()])}(),i.addEventListener("click",(function(){m="ru",j(m,v[m],h[m],p[m]),W(_[m]),c.placeholder=L[m]})),l.addEventListener("click",(function(){m="en",j(m,v[m],h[m],p[m]),W(_[m]),c.placeholder=L[m]})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",c.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(c.value=localStorage.getItem("name"))}));const q=document.querySelector(".change-photosource"),E=document.querySelector(".choose-background"),w=document.body;let k,x=S(1,21);async function I(){const e=new Image,t=f();let n=x;"github"==q.value?(n=String(n).padStart(2,"0"),e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${n}.jpg`):"unsplash"==q.value?e.src=await M():"flickr"==q.value&&(e.src=await async function(){const e=f();k=E.value||e;const t=` https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=4e0680f534c7a14f171f97fab53d3a2b&tags=${k}&extras=url_l&format=json&nojsoncallback=1`,n=await fetch(t),o=await n.json();let c=S(1,100);return o.photos.photo[c].url_l}()),e.onload=()=>{w.style.backgroundImage=`url(${e.src})`}}async function M(){const e=f();k=E.value||e;const t=`https://api.unsplash.com/photos/random?orientation=landscape&query=${k}&client_id=SgJLxIlxaQjq9d2g0s7qLFyI5OWo1a90-0wnKRcAPJA`,n=await fetch(t);return(await n.json()).urls.regular}I(),E.addEventListener("change",(function(){k=E.value,I()})),a.addEventListener("click",(function(){x<20?x++:x=0,I()})),r.addEventListener("click",(function(){x>1?x--:x=20,I()})),q.addEventListener("change",I),setTimeout(M,1e3);const $=document.querySelector(".weather-icon"),b=document.querySelector(".temperature"),T=document.querySelector(".weather-description"),C=document.querySelector(".city"),A=document.querySelector(".wind"),H=document.querySelector(".humidity");async function j(e,t,n,o){try{const c=`https://api.openweathermap.org/data/2.5/weather?q=${C.value}&lang=${e}&appid=6d8e50fc650417e5a3c52a8404cbff75&units=metric`,r=await fetch(c),a=await r.json();$.className="weather-icon owf",$.classList.add(`owf-${a.weather[0].id}`),b.textContent=`${a.main.temp.toFixed(0)}°C`,T.textContent=a.weather[0].description,A.textContent=`${t} ${a.wind.speed.toFixed(0)}${o}`,H.textContent=`${n} ${a.main.humidity}%`}catch(e){console.error()}}document.querySelector(".weather-error"),C.addEventListener("keypress",(function(e){"Enter"===e.code&&(j(m,v[m],h[m],p[m]),C.blur())})),j(m,v[m],h[m],p[m]);let B=S(0,62);const _={ru:"data.json",en:"quotes.json"},D=document.querySelector(".quote"),F=document.querySelector(".author"),G=document.querySelector(".change-quote");async function W(e){const t=e,n=await fetch(t),o=await n.json();D.innerHTML=o[B].text,F.innerHTML=o[B].author}W(_[m]),G.addEventListener("click",(function(){B<62?B++:B=0,W(_[m])}));const R=document.querySelector(".play"),J=document.querySelector(".play-prev"),N=document.querySelector(".play-next"),Y=document.querySelector(".play-list"),K=document.querySelector(".song-title"),O=document.querySelector("#progress-bar"),P=document.querySelector(".current-time"),Q=document.querySelector(".duration-time"),z=document.querySelector("#volume"),U=document.querySelector(".volume-buttom");let V=0,X=!0;const Z=new Audio;for(let t=0;t<e.length;t++){let n=document.createElement("li");n.classList.add("play-item"),n.textContent=e[t].title+"|"+e[t].duration,n.setAttribute("data-src",e[t].src),Y.append(n)}const ee=document.querySelectorAll(".play-item");function te(){Z.src=e[V].src,X?(Z.play(),X=!1,R.classList.add("pause")):(Z.pause(),R.classList.remove("pause"),X=!0,ee.forEach((e=>e.classList.remove("item-active"))));let t=document.querySelector(`[data-src="${e[V].src}"]`);ee.forEach((e=>e.classList.remove("item-active"))),t.classList.toggle("item-active")}function ne(){V++,V>3&&(V=0),Z.src=e[V].src,K.innerHTML=e[V].title,X=!0,te()}Z.addEventListener("ended",(function(){ne()})),z.addEventListener("input",(function(){0==z.value?U.classList.add("mute"):U.classList.remove("mute")})),U.addEventListener("click",(function(){0!=Z.volume?(Z.volume=0,volume.value=0,U.classList.add("mute")):(Z.volume=.5,volume.value=50,U.classList.remove("mute"))})),R.addEventListener("click",te),N.addEventListener("click",ne),J.addEventListener("click",(function(){V--,V<0&&(V=3),Z.src=e[V].src,K.innerHTML=e[V].title,X=!0,te()})),O.addEventListener("change",(function(){Z.currentTime=O.value})),volume.addEventListener("change",(function(){Z.volume=z.value/100})),setInterval((function(){O.max=Z.duration,O.value=Z.currentTime,P.innerHTML=function(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return n<10&&(n=`0${n}`),`${t}:${n}`}(Math.floor(Z.currentTime)),Q.innerHTML=e[V].duration}),500);let oe=document.querySelector(".popup__bg"),ce=document.querySelector(".popup"),re=document.querySelectorAll(".open-popup"),ae=document.querySelector(".close-popup");re.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),oe.classList.add("active"),ce.classList.add("active")}))})),ae.addEventListener("click",(()=>{oe.classList.remove("active"),ce.classList.remove("active")})),document.addEventListener("click",(e=>{e.target===oe&&(oe.classList.remove("active"),ce.classList.remove("active"))}));const ie=document.getElementById("time"),le=document.getElementById("date"),de=document.getElementById("greeting"),se=document.getElementById("quotes"),ue=document.getElementById("weather"),me=document.getElementById("audioplayer"),ye=document.getElementById("todo"),pe=document.querySelector(".player"),ve=(document.querySelector(".button-todo"),document.querySelector(".todo"));function he(){0==ie.checked?t.style.opacity=0:t.style.opacity=1,0==le.checked?n.style.opacity=0:n.style.opacity=1,0==de.checked?d.style.opacity=0:d.style.opacity=1,0==se.checked?s.style.opacity=0:s.style.opacity=1,0==ue.checked?u.style.opacity=0:u.style.opacity=1,0==me.checked?pe.style.opacity=0:pe.style.opacity=1,0==ye.checked?ve.style.opacity=0:ve.style.opacity=1}ie.addEventListener("change",he),le.addEventListener("change",he),de.addEventListener("change",he),se.addEventListener("change",he),ue.addEventListener("change",he),me.addEventListener("change",he),ye.addEventListener("change",he),q.addEventListener("change",he),he();const ge=document.querySelector(".todo-list"),Le=document.createElement("li"),fe=document.createElement("div"),Se=document.createElement("btn"),qe=document.createElement("btn"),Ee=document.querySelector(".todo-add"),we=document.querySelector(".todo-input");let ke;function xe(){let e=document.querySelectorAll(".todo-complete"),t=document.querySelectorAll(".todo-remove"),n=document.querySelectorAll(".todo-item");e.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].classList.toggle("todo-item-completed"),ke=ge.innerHTML,localStorage.setItem("todo",ke)}))})),t.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].remove(),ke=ge.innerHTML,localStorage.setItem("todo",ke)}))}))}document.querySelector(".todo"),document.querySelector(".close-todo"),Le.classList.add("play-item","todo-item"),Se.classList.add("todo-remove"),qe.classList.add("todo-complete"),fe.classList.add("todo-controls"),qe.textContent="☑",Se.textContent="x",fe.appendChild(qe),fe.appendChild(Se),ge.innerHTML=localStorage.getItem("todo"),xe(),Ee.addEventListener("click",(()=>{let e=document.querySelectorAll(".todo-item").length,t=we.value.trim();t.length>0&&e<7&&(Le.textContent=t,Le.appendChild(fe),ge.append(Le.cloneNode(!0)),we.value="",ke=ge.innerHTML),xe(),localStorage.setItem("todo",ke)}))})();