(()=>{"use strict";const e=[{title:"Aqua Caelestis ",src:"assets/sounds/AquaCaelestis.mp3",duration:" 00:39"},{title:"River Flows In You ",src:"assets/sounds/RiverFlowsInYou.mp3",duration:" 01:37"},{title:"Ennio Morricone ",src:"assets/sounds/EnnioMorricone.mp3",duration:" 01:37"},{title:"Summer Wind ",src:"assets/sounds/SummerWind.mp3",duration:" 01:50"}],t=document.querySelector(".time"),n=document.querySelector(".dates"),o=document.querySelector(".greeting"),c=document.querySelector(".name"),r=document.querySelector(".slide-prev"),a=document.querySelector(".slide-next"),i=document.querySelector(".ru"),l=document.querySelector(".en"),s=document.querySelector(".greeting-container"),d=document.querySelector(".quote-container"),u=document.querySelector(".weather");let m="en";const y={en:{night:"Good night",morning:"Good morning",afternoon:"Good afternoon",evening:"Good evening"},ru:{night:"Спокойной ночи",morning:"Доброе утро",afternoon:"Добрый день",evening:"Добрый вечер"}},p={en:"m/c",ru:"м/с"},v={en:"Winds speed",ru:"Скорость ветра"},h={en:"Air humidity",ru:"Влажность воздуха"},g={en:"en",ru:"ru"},L={en:"[Enter name]",ru:"[Введите имя]"};function f(){const e=(new Date).getHours();return e>=5&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0&&e<5?"night":void 0}function S(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}!function e(){const c=(new Date).toLocaleTimeString();t.textContent=c,setTimeout(e,1e3),function(){const e=(new Date).toLocaleDateString(g[m],{month:"long",day:"numeric",weekday:"long"});n.innerText=e}(),f(),function(e){const t=`${e}`;o.textContent=t}(y[m][f()])}(),i.addEventListener("click",(function(){m="ru",B(m,v[m],h[m],p[m]),R(D[m]),c.placeholder=L[m]})),l.addEventListener("click",(function(){m="en",B(m,v[m],h[m],p[m]),R(D[m]),c.placeholder=L[m]})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",c.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(c.value=localStorage.getItem("name"))}));const q=document.querySelector(".change-photosource"),E=document.querySelector(".choose-background"),w=document.body;let k,x=S(1,21);async function C(){const e=new Image,t=f();let n=x;"github"==q.value?(n=String(n).padStart(2,"0"),e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${n}.jpg`):"unsplash"==q.value?e.src=await I():"flickr"==q.value&&(e.src=await async function(){const e=f();k=E.value||e;const t=` https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=4e0680f534c7a14f171f97fab53d3a2b&tags=${k}&extras=url_l&format=json&nojsoncallback=1`,n=await fetch(t),o=await n.json();let c=S(1,100);return o.photos.photo[c].url_l}()),e.onload=()=>{w.style.backgroundImage=`url(${e.src})`}}async function I(){const e=f();k=E.value||e;const t=`https://api.unsplash.com/photos/random?orientation=landscape&query=${k}&client_id=SgJLxIlxaQjq9d2g0s7qLFyI5OWo1a90-0wnKRcAPJA`,n=await fetch(t);return(await n.json()).urls.regular}C(),E.addEventListener("change",(function(){k=E.value,C()})),a.addEventListener("click",(function(){x<20?x++:x=0,C()})),r.addEventListener("click",(function(){x>1?x--:x=20,C()})),q.addEventListener("change",C),setTimeout(I,1e3);const $=document.querySelector(".weather-icon"),M=document.querySelector(".temperature"),b=document.querySelector(".weather-description"),T=document.querySelector(".city"),A=document.querySelector(".wind"),H=document.querySelector(".humidity"),j=document.querySelector(".weather-error");async function B(e,t,n,o){try{const c=`https://api.openweathermap.org/data/2.5/weather?q=${T.value}&lang=${e}&appid=6d8e50fc650417e5a3c52a8404cbff75&units=metric`,r=await fetch(c),a=await r.json();404==r.status?(j.textContent=`${T.value} is not found`,M.textContent="",b.textContent="",A.textContent="",H.textContent=""):400==r.status?(j.textContent="Please enter the city",M.textContent="",b.textContent="",A.textContent="",H.textContent=""):j.textContent="",$.className="weather-icon owf",$.classList.add(`owf-${a.weather[0].id}`),M.textContent=`${a.main.temp.toFixed(0)}°C`,b.textContent=a.weather[0].description,A.textContent=`${t} ${a.wind.speed.toFixed(0)}${o}`,H.textContent=`${n} ${a.main.humidity}%`}catch(e){console.error()}}T.addEventListener("keypress",(function(e){"Enter"===e.code&&(B(m,v[m],h[m],p[m]),T.blur())})),B(m,v[m],h[m],p[m]);let _=S(0,62);const D={ru:"data.json",en:"quotes.json"},F=document.querySelector(".quote"),G=document.querySelector(".author"),W=document.querySelector(".change-quote");async function R(e){const t=e,n=await fetch(t),o=await n.json();F.innerHTML=o[_].text,G.innerHTML=o[_].author}R(D[m]),W.addEventListener("click",(function(){_<62?_++:_=0,R(D[m])}));const J=document.querySelector(".play"),N=document.querySelector(".play-prev"),P=document.querySelector(".play-next"),Y=document.querySelector(".play-list"),K=document.querySelector(".song-title"),O=document.querySelector("#progress-bar"),Q=document.querySelector(".current-time"),z=document.querySelector(".duration-time"),U=document.querySelector("#volume"),V=document.querySelector(".volume-buttom");let X=0,Z=!0;const ee=new Audio;for(let t=0;t<e.length;t++){let n=document.createElement("li");n.classList.add("play-item"),n.textContent=e[t].title+"|"+e[t].duration,n.setAttribute("data-src",e[t].src),Y.append(n)}const te=document.querySelectorAll(".play-item");function ne(){ee.src=e[X].src,Z?(ee.play(),Z=!1,J.classList.add("pause")):(ee.pause(),J.classList.remove("pause"),Z=!0,te.forEach((e=>e.classList.remove("item-active"))));let t=document.querySelector(`[data-src="${e[X].src}"]`);te.forEach((e=>e.classList.remove("item-active"))),t.classList.toggle("item-active")}function oe(){X++,X>3&&(X=0),ee.src=e[X].src,K.innerHTML=e[X].title,Z=!0,ne()}ee.addEventListener("ended",(function(){oe()})),U.addEventListener("input",(function(){0==U.value?V.classList.add("mute"):V.classList.remove("mute")})),V.addEventListener("click",(function(){0!=ee.volume?(ee.volume=0,volume.value=0,V.classList.add("mute")):(ee.volume=.5,volume.value=50,V.classList.remove("mute"))})),J.addEventListener("click",ne),P.addEventListener("click",oe),N.addEventListener("click",(function(){X--,X<0&&(X=3),ee.src=e[X].src,K.innerHTML=e[X].title,Z=!0,ne()})),O.addEventListener("change",(function(){ee.currentTime=O.value})),volume.addEventListener("change",(function(){ee.volume=U.value/100})),setInterval((function(){O.max=ee.duration,O.value=ee.currentTime,Q.innerHTML=function(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return n<10&&(n=`0${n}`),`${t}:${n}`}(Math.floor(ee.currentTime)),z.innerHTML=e[X].duration}),500);let ce=document.querySelector(".popup__bg"),re=document.querySelector(".popup"),ae=document.querySelectorAll(".open-popup"),ie=document.querySelector(".close-popup");ae.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),ce.classList.add("active"),re.classList.add("active")}))})),ie.addEventListener("click",(()=>{ce.classList.remove("active"),re.classList.remove("active")})),document.addEventListener("click",(e=>{e.target===ce&&(ce.classList.remove("active"),re.classList.remove("active"))}));const le=document.getElementById("time"),se=document.getElementById("date"),de=document.getElementById("greeting"),ue=document.getElementById("quotes"),me=document.getElementById("weather"),ye=document.getElementById("audioplayer"),pe=document.getElementById("todo"),ve=document.querySelector(".player"),he=(document.querySelector(".button-todo"),document.querySelector(".todo"));function ge(){0==le.checked?t.style.opacity=0:t.style.opacity=1,0==se.checked?n.style.opacity=0:n.style.opacity=1,0==de.checked?s.style.opacity=0:s.style.opacity=1,0==ue.checked?d.style.opacity=0:d.style.opacity=1,0==me.checked?u.style.opacity=0:u.style.opacity=1,0==ye.checked?ve.style.opacity=0:ve.style.opacity=1,0==pe.checked?he.style.opacity=0:he.style.opacity=1}le.addEventListener("change",ge),se.addEventListener("change",ge),de.addEventListener("change",ge),ue.addEventListener("change",ge),me.addEventListener("change",ge),ye.addEventListener("change",ge),pe.addEventListener("change",ge),q.addEventListener("change",ge),ge();const Le=document.querySelector(".todo-list"),fe=document.createElement("li"),Se=document.createElement("div"),qe=document.createElement("btn"),Ee=document.createElement("btn"),we=document.querySelector(".todo-add"),ke=document.querySelector(".todo-input");let xe;function Ce(){let e=document.querySelectorAll(".todo-complete"),t=document.querySelectorAll(".todo-remove"),n=document.querySelectorAll(".todo-item");e.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].classList.toggle("todo-item-completed"),xe=Le.innerHTML,localStorage.setItem("todo",xe)}))})),t.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].remove(),xe=Le.innerHTML,localStorage.setItem("todo",xe)}))}))}document.querySelector(".todo"),document.querySelector(".close-todo"),fe.classList.add("play-item","todo-item"),qe.classList.add("todo-remove"),Ee.classList.add("todo-complete"),Se.classList.add("todo-controls"),Ee.textContent="☑",qe.textContent="x",Se.appendChild(Ee),Se.appendChild(qe),Le.innerHTML=localStorage.getItem("todo"),Ce(),we.addEventListener("click",(()=>{let e=document.querySelectorAll(".todo-item").length,t=ke.value.trim();t.length>0&&e<7&&(fe.textContent=t,fe.appendChild(Se),Le.append(fe.cloneNode(!0)),ke.value="",xe=Le.innerHTML),Ce(),localStorage.setItem("todo",xe)}))})();
console.log(`сделанно все кроме сохранения настроек и их перевода,сохр. города и проигрование трека из плейлиста `);