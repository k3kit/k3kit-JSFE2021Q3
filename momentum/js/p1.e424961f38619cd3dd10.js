(()=>{"use strict";const e=[{title:"Aqua Caelestis ",src:"assets/sounds/AquaCaelestis.mp3",duration:" 00:39"},{title:"River Flows In You ",src:"assets/sounds/RiverFlowsInYou.mp3",duration:" 01:37"},{title:"Ennio Morricone ",src:"assets/sounds/EnnioMorricone.mp3",duration:" 01:37"},{title:"Summer Wind ",src:"assets/sounds/SummerWind.mp3",duration:" 01:50"}],t=document.querySelector(".time"),n=document.querySelector(".dates"),o=document.querySelector(".greeting"),c=document.querySelector(".name"),r=document.querySelector(".slide-prev"),a=document.querySelector(".slide-next"),i=document.querySelector(".ru"),l=document.querySelector(".en"),d=document.querySelector(".greeting-container"),u=document.querySelector(".quote-container"),s=document.querySelector(".weather");let m="en";const y={en:{night:"Good night",morning:"Good morning",afternoon:"Good afternoon",evening:"Good evening"},ru:{night:"Спокойной ночи",morning:"Доброе утро",afternoon:"Добрый день",evening:"Добрый вечер"}},p={en:"m/c",ru:"м/с"},v={en:"Winds speed",ru:"Скорость ветра"},h={en:"Air humidity",ru:"Влажность воздуха"},g={en:"en",ru:"ru"},L={en:"[Enter name]",ru:"[Введите имя]"};function S(){const e=(new Date).getHours();return e>=5&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<24?"evening":e>=0&&e<5?"night":void 0}function f(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}!function e(){const c=(new Date).toLocaleTimeString();t.textContent=c,setTimeout(e,1e3),function(){const e=(new Date).toLocaleDateString(g[m],{month:"long",day:"numeric",weekday:"long"});n.innerText=e}(),S(),function(e){const t=`${e}`;o.textContent=t}(y[m][S()])}(),i.addEventListener("click",(function(){m="ru",j(m,v[m],h[m],p[m]),Y(_[m]),c.placeholder=L[m]})),l.addEventListener("click",(function(){m="en",j(m,v[m],h[m],p[m]),Y(_[m]),c.placeholder=L[m]})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",c.value)})),window.addEventListener("load",(function(){localStorage.getItem("name")&&(c.value=localStorage.getItem("name"))}));const q=document.querySelector(".change-photosource"),E=document.querySelector(".choose-background"),w=document.body;let k,T=f(1,21);async function b(){const e=new Image,t=S();let n=T;"github"==q.value?(n=String(n).padStart(2,"0"),e.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${n}.jpg`):"unsplash"==q.value?e.src=await x():"flickr"==q.value&&(e.src=await async function(){const e=S();k=E.value||e;const t=` https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=4e0680f534c7a14f171f97fab53d3a2b&tags=${k}&extras=url_l&format=json&nojsoncallback=1`,n=await fetch(t),o=await n.json();let c=f(1,100);return o.photos.photo[c].url_l}()),e.onload=()=>{w.style.backgroundImage=`url(${e.src})`}}async function x(){const e=S();k=E.value||e;const t=`https://api.unsplash.com/photos/random?orientation=landscape&query=${k}&client_id=9T_J1TSSdYKKDalobTpHX9PlYnAqP2r5ZgVwdaajAqg`,n=await fetch(t);return(await n.json()).urls.regular}b(),E.addEventListener("change",(function(){k=E.value,b()})),a.addEventListener("click",(function(){T<20?T++:T=0,b()})),r.addEventListener("click",(function(){T>1?T--:T=20,b()})),q.addEventListener("change",b),setTimeout(x,1e3);const I=document.querySelector(".weather-icon"),M=document.querySelector(".temperature"),$=document.querySelector(".weather-description"),C=document.querySelector(".city"),A=document.querySelector(".wind"),H=document.querySelector(".humidity");async function j(e,t,n,o){try{const c=`https://api.openweathermap.org/data/2.5/weather?q=${C.value}&lang=${e}&appid=6d8e50fc650417e5a3c52a8404cbff75&units=metric`,r=await fetch(c),a=await r.json();I.className="weather-icon owf",I.classList.add(`owf-${a.weather[0].id}`),M.textContent=`${a.main.temp.toFixed(0)}°C`,$.textContent=a.weather[0].description,A.textContent=`${t} ${a.wind.speed.toFixed(0)}${o}`,H.textContent=`${n} ${a.main.humidity}%`}catch(e){console.error()}}document.querySelector(".weather-error"),C.addEventListener("keypress",(function(e){"Enter"===e.code&&(j(m,v[m],h[m],p[m]),C.blur())})),j(m,v[m],h[m],p[m]);let B=f(0,62);const _={ru:"data.json",en:"quotes.json"},D=document.querySelector(".quote"),F=document.querySelector(".author"),G=document.querySelector(".change-quote");async function Y(e){const t=e,n=await fetch(t),o=await n.json();D.innerHTML=o[B].text,F.innerHTML=o[B].author}Y(_[m]),G.addEventListener("click",(function(){B<62?B++:B=0,Y(_[m])}));const W=document.querySelector(".play"),K=document.querySelector(".play-prev"),N=document.querySelector(".play-next"),P=document.querySelector(".play-list"),R=document.querySelector(".song-title"),J=document.querySelector("#progress-bar"),V=document.querySelector(".current-time"),X=document.querySelector(".duration-time"),Z=document.querySelector("#volume"),z=document.querySelector(".volume-buttom");let O=0,Q=!0;const U=new Audio;for(let t=0;t<e.length;t++){let n=document.createElement("li");n.classList.add("play-item"),n.textContent=e[t].title+"|"+e[t].duration,n.setAttribute("data-src",e[t].src),P.append(n)}const ee=document.querySelectorAll(".play-item");function te(){U.src=e[O].src,Q?(U.play(),Q=!1,W.classList.add("pause")):(U.pause(),W.classList.remove("pause"),Q=!0,ee.forEach((e=>e.classList.remove("item-active"))));let t=document.querySelector(`[data-src="${e[O].src}"]`);ee.forEach((e=>e.classList.remove("item-active"))),t.classList.toggle("item-active")}function ne(){O++,O>3&&(O=0),U.src=e[O].src,R.innerHTML=e[O].title,Q=!0,te()}U.addEventListener("ended",(function(){ne()})),Z.addEventListener("input",(function(){0==Z.value?z.classList.add("mute"):z.classList.remove("mute")})),z.addEventListener("click",(function(){0!=U.volume?(U.volume=0,volume.value=0,z.classList.add("mute")):(U.volume=.5,volume.value=50,z.classList.remove("mute"))})),W.addEventListener("click",te),N.addEventListener("click",ne),K.addEventListener("click",(function(){O--,O<0&&(O=3),U.src=e[O].src,R.innerHTML=e[O].title,Q=!0,te()})),J.addEventListener("change",(function(){U.currentTime=J.value})),volume.addEventListener("change",(function(){U.volume=Z.value/100})),setInterval((function(){J.max=U.duration,J.value=U.currentTime,V.innerHTML=function(e){let t=Math.floor(e/60),n=Math.floor(e-60*t);return n<10&&(n=`0${n}`),`${t}:${n}`}(Math.floor(U.currentTime)),X.innerHTML=e[O].duration}),500);let oe=document.querySelector(".popup__bg"),ce=document.querySelector(".popup"),re=document.querySelectorAll(".open-popup"),ae=document.querySelector(".close-popup");re.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),oe.classList.add("active"),ce.classList.add("active")}))})),ae.addEventListener("click",(()=>{oe.classList.remove("active"),ce.classList.remove("active")})),document.addEventListener("click",(e=>{e.target===oe&&(oe.classList.remove("active"),ce.classList.remove("active"))}));const ie=document.getElementById("time"),le=document.getElementById("date"),de=document.getElementById("greeting"),ue=document.getElementById("quotes"),se=document.getElementById("weather"),me=document.getElementById("audioplayer"),ye=document.getElementById("todo"),pe=document.querySelector(".player"),ve=(document.querySelector(".button-todo"),document.querySelector(".todo"));function he(){0==ie.checked?t.style.opacity=0:t.style.opacity=1,0==le.checked?n.style.opacity=0:n.style.opacity=1,0==de.checked?d.style.opacity=0:d.style.opacity=1,0==ue.checked?u.style.opacity=0:u.style.opacity=1,0==se.checked?s.style.opacity=0:s.style.opacity=1,0==me.checked?pe.style.opacity=0:pe.style.opacity=1,0==ye.checked?ve.style.opacity=0:ve.style.opacity=1}ie.addEventListener("change",he),le.addEventListener("change",he),de.addEventListener("change",he),ue.addEventListener("change",he),se.addEventListener("change",he),me.addEventListener("change",he),ye.addEventListener("change",he),q.addEventListener("change",he),he();const ge=document.querySelector(".todo-list"),Le=document.createElement("li"),Se=document.createElement("div"),fe=document.createElement("btn"),qe=document.createElement("btn"),Ee=document.querySelector(".todo-add"),we=document.querySelector(".todo-input");let ke;function Te(){let e=document.querySelectorAll(".todo-complete"),t=document.querySelectorAll(".todo-remove"),n=document.querySelectorAll(".todo-item");e.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].classList.toggle("todo-item-completed"),ke=ge.innerHTML,localStorage.setItem("todo",ke)}))})),t.forEach(((e,t)=>{e.addEventListener("click",(()=>{n[t].remove(),ke=ge.innerHTML,localStorage.setItem("todo",ke)}))}))}document.querySelector(".todo"),document.querySelector(".close-todo"),Le.classList.add("play-item","todo-item"),fe.classList.add("todo-remove"),qe.classList.add("todo-complete"),Se.classList.add("todo-controls"),qe.textContent="☑",fe.textContent="x",Se.appendChild(qe),Se.appendChild(fe),ge.innerHTML=localStorage.getItem("todo"),Te(),Ee.addEventListener("click",(()=>{let e=document.querySelectorAll(".todo-item").length,t=we.value.trim();t.length>0&&e<7&&(Le.textContent=t,Le.appendChild(Se),ge.append(Le.cloneNode(!0)),we.value="",ke=ge.innerHTML),Te(),localStorage.setItem("todo",ke)}))})();